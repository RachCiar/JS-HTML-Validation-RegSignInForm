<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Register Page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="style.css">
        <script type="text/javascript" src="DWD257-Final-RegSignIn-1/main.js"></script>

    </head>
    <body>
        <header>
            <h1>Welcome to the Register Page</h1>
            <div class="navbar">
                <ul class="navbarul">
                    <li class="navbarli"><a href="index.html" class="active">Home</a><li>
                    <li class="navbarli"><a href="signin.html">Sign-In Page</a></li>
                    <li class="navbarli"><a href="register.html">Register Page</a></li>
                    <li class="navbarli"><a href="userInfo.html">User Information</a></li>
                </ul>
            </div>
        </header>
        <form  action="" method="post" class="registerForm" onsubmit="return checkForm(server.php);">

            <div class="header">
                <h2>Register</h2>
            </div>

            <div class="input-group">
                <p><label for="fname">First Name</label>
                    <input type="text" name="fname" required>
            </div>
            <div class="input-group">
                <p><label for="lname">Last Name</label >
                    <input type="text" name="lname" required>
            </div>
            <div class="input-group">
                <label for="email">Email Address:</label>
                <input type="email" name="email" required>
                <span class="error" aria-live="polite"></span>
            </div>
            <div class="input-group">
                <label for="pass1">Password:</label>
                <input type="password"  name="pass1"                         
                       title="Must contain at least one number and one uppercase and lowercase letter, 
                       and at least 6 or more characters" required>
            </div>
            <div class="input-group">
                <p><label for="pass2">Confirm Password:</label>
                    <input type="password"  name="pass2" 
                           title="Must contain at least one number and one uppercase and lowercase letter, 
                           and at least 6 or more characters" required>
            </div>
            <div class="input-group">
                <button type="submit" value="Create Account" name="create" class="btn">Create Account</button>
            </div>
            <p>
                Already a member? <a href="signin.html">Sign in</a>
            </p>

        </form>

        <script>
            var email = document.getElementById("mail");
            var error = document.querySelector('.error');
            var form = document.getElementsByTagName('form')[0];

            email.addEventListener("input", function (event) {
                // Each time the user types something, we check if the
                // email field is valid.
                if (email.validity.valid) {
                    // In case there is an error message visible, if the field
                    // is valid, we remove the error message.
                    error.innerHTML = ""; // Reset the content of the message
                    error.className = "error"; // Reset the visual state of the message
                }
            }, false);

            form.addEventListener("submit", function (event) {
                // Each time the user tries to send the data, we check
                // if the email field is valid.
                if (!email.validity.valid) {

                    // If the field is not valid, we display a custom
                    // error message.
                    error.innerHTML = "I expect an e-mail, darling!";
                    error.className = "error active";
                    // And we prevent the form from being sent by canceling the event
                    event.preventDefault();
                }
            }, false);

            /*Check for the passwords to make sure they match and are correct*/


            function checkPassword(str)
            {
                var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}$/;
                return re.test(str);
            }

            function checkForm(form)
            {
                if (form.username.value == "") {
                    alert("Error: Username cannot be blank!");
                    form.username.focus();
                    return false;
                }
                re = /^\w+$/;
                if (!re.test(form.username.value)) {
                    alert("Error: Username must contain only letters, numbers and underscores!");
                    form.username.focus();
                    return false;
                }
                if (form.pwd1.value != "" && form.pwd1.value == form.pwd2.value) {
                    if (!checkPassword(form.pwd1.value)) {
                        alert("The password you have entered is not valid!");
                        form.pwd1.focus();
                        return false;
                    }
                } else {
                    alert("Error: Please check that you've entered and confirmed your password!");
                    form.pwd1.focus();
                    return false;
                }
                return true;
            }

        </script>
    </body>
</html>
